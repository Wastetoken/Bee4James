<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Goldie The Bee</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <div class="content-fit">
    <div class="logo">GOLDIE THE BEE</div>
    <nav>
      <ul>
        <li></li>
        <li></li>
        <li></li>
      </ul>
    </nav>
  </div>
</header>

<div class="section" id="banner">
  <div class="content-fit">
    <div class="title hero-text" data-before="">hey JaMes!</div>
  </div>
  <img src="https://pub-3ac89d8d8ece43849feac0259fe49733.r2.dev/Untitled%20design%20(15).png" class="decorate" alt="" style="width: 100vw; bottom: 0; right: 0;">
  <img src="https://pub-3ac89d8d8ece43849feac0259fe49733.r2.dev/Untitled%20design%20(17).png" class="decorate" alt="" style="width: 30vw; bottom: 0; left: 0;">
</div>

<div class="section" id="intro">
  <div class="content-fit">
    <div class="number">01</div>
    <div class="des">
      <div class="title intro-title">I want you to meet Goldie: The Amazing Honeybee Hero!</div>
      <p class="goldie-text">
        Did you know that Goldie and her bee friends are superheroes of nature? Bees visit over 2 million flowers just to make one pound of honey! That's like flying around the world twice! Goldie has five eyes - two big ones to see colors and three tiny ones on top of her head to sense light. She can see colors that humans can't, especially ultraviolet light, which helps her find the sweetest flowers. Bees like Goldie are so important that one out of every three bites of food we eat exists because of pollinators like her! Without Goldie and her friends, we wouldn't have apples, strawberries, almonds, or even chocolate! Goldie works incredibly hard too! Did you know that a single bee makes only about one-twelfth of a teaspoon of honey in her entire lifetime? That means she is visiting thousands of flowers every day. The buzzing sound you hear isn't just a noise - it's Goldie flapping her wings 200 times per second, Think about that!
      </p>
    </div>
  </div>
</div>

<div class="section" id="description">
  <div class="content-fit">
    <div class="number">02</div>
    <div class="des">
      <div class="title same-as-intro">Robo-James, you're not the only one with awesome dancing skills. Let me tell you about Goldie's Super Communication Dance!</div>
      <p class="goldie-text">
        Goldie has an incredible secret power - She can dance to talk to her friends! When Goldie finds amazing flowers full of nectar, she performs a special "wiggle dance" back at the hive to tell other bees exactly where to find them. The angle of her dance shows the direction, and how long she wiggles tells them the distance. It's like GPS, but way cooler! Bees live in a family called a colony with up to 60,000 members, and they all work together like a super team. The queen bee can live for up to 5 years and is the mother of all the bees in the hive! Worker bees like Goldie are all girls, and they do everything from nursing baby bees to guarding the hive. Male bees, called drones, have only one job - to help create new queens. Goldie and her sisters keep the hive at exactly 93 degrees Fahrenheit by fanning their wings when it's hot and clustering together when it's cold. They're like tiny, fuzzy air conditioners!
      </p>
    </div>
  </div>
  <img src="https://pub-3ac89d8d8ece43849feac0259fe49733.r2.dev/Untitled%20design%20(16).png" class="decorate" alt="" style="width: 70vw; bottom: 0; right: 0;">
</div>

<div class="section" id="contact">
  <div class="content-fit">
    <div class="number">03</div>
    <div class="des">
      <div class="title same-as-intro">AMAZING BEE FACTS</div>
      <table>
        <tr>
          <td>Super Speed</td>
          <td>Goldie flies 15 miles per hour!</td>
        </tr>
        <tr>
          <td>Flower Visits</td>
          <td>50-100 flowers per trip</td>
        </tr>
        <tr>
          <td>Lifespan</td>
          <td>Worker bees live 5-6 weeks in summer</td>
        </tr>
        <tr>
          <td>Brain Power</td>
          <td>Bees can count up to four and recognize human faces!</td>
        </tr>
      </table>
      <div class="sign">Love Bees, Save the World!</div>
    </div>
  </div>
</div>

<div id="container3D"></div>

<script type="module">
// ============================================
// IMPORTS - External libraries
// ============================================
import * as THREE from "https://cdn.skypack.dev/three@0.129.0/build/three.module.js";
import { GLTFLoader } from "https://cdn.skypack.dev/three@0.129.0/examples/jsm/loaders/GLTFLoader.js";
import { gsap } from "https://cdn.skypack.dev/gsap";

// ============================================
// CAMERA SETUP - Controls your view perspective
// ============================================
const camera = new THREE.PerspectiveCamera(
  80,
  window.innerWidth / window.innerHeight,
  0.1,
  1000
);
camera.position.z = 21;

// ============================================
// SCENE SETUP - The 3D world container
// ============================================
const scene = new THREE.Scene();
let bee;
let mixer;
let entranceComplete = false;
const loader = new GLTFLoader();

// ============================================
// MODEL LOADING - Loads and configures the bee
// ============================================
loader.load(
  "https://raw.githubusercontent.com/DennysDionigi/bee-glb/94253437c023643dd868592e11a0fd2c228cfe07/demon_bee_full_texture.glb",
  function (gltf) {
    bee = gltf.scene;
    
    bee.position.set(1, 1, 0);
    bee.rotation.set(0, 1, 1);
    bee.scale.set(0.01, 0.8, 0.8);
    
    scene.add(bee);

    mixer = new THREE.AnimationMixer(bee);
    mixer.clipAction(gltf.animations[0]).play();
    
    gsap.to(bee.position, {
      x: -3,
      y: -4,
      z: -6,
      duration: 4,
      ease: "power2.out",
      onComplete: () => {
        entranceComplete = true;
      }
    });
    
    gsap.to(bee.rotation, {
      x: 1,
      y: 1,
      z: 2,
      duration: 4,
      ease: "power2.out"
    });
    
    gsap.to(bee.scale, {
      x: 5,
      y: 5,
      z: 5,
      duration: 4,
      ease: "power2.out"
    });
  },
  function (xhr) {
    console.log((xhr.loaded / xhr.total) * 100 + "% loaded");
  },
  function (error) {
    console.error("Error loading model:", error);
  }
);

// ============================================
// RENDERER SETUP - Displays the 3D scene
// ============================================
const renderer = new THREE.WebGLRenderer({ alpha: true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.getElementById("container3D").appendChild(renderer.domElement);

// ============================================
// LIGHTING SETUP - Controls scene illumination
// ============================================
const ambientLight = new THREE.AmbientLight(0xffffff, 1.0);
scene.add(ambientLight);

const topLight = new THREE.DirectionalLight(0xffffff, 0.7);
topLight.position.set(500, 500, 500);
scene.add(topLight);

// ============================================
// FLIGHT PATH - Multiple waypoints for continuous flight
// ============================================
// EDIT: Add more waypoints to create a more complex flight path
// Each waypoint includes scroll percentage (0-1) where it should be reached
const flightPath = [
  // Banner section - Goldie hovers center stage
  { 
    scrollProgress: 0.0,
    position: { x: -3, y: 2, z: 0 },
    rotation: { x: 0.2, y: 0.5, z: 0.1 }
  },
  {
    scrollProgress: 0.05,
    position: { x: -2, y: 1, z: -2 },
    rotation: { x: 0.1, y: 0.8, z: 0.2 }
  },
  // Transition to intro - Goldie flies right
  {
    scrollProgress: 0.15,
    position: { x: 4, y: 0, z: -3 },
    rotation: { x: 0.3, y: -0.3, z: 0.4 }
  },
  {
    scrollProgress: 0.25,
    position: { x: 8, y: -2, z: -4 },
    rotation: { x: 0.2, y: -0.6, z: 0.3 }
  },
  // Intro section - Goldie circles around
  {
    scrollProgress: 0.35,
    position: { x: 10, y: -1, z: -2 },
    rotation: { x: -0.1, y: -0.8, z: 0.5 }
  },
  {
    scrollProgress: 0.42,
    position: { x: 9, y: 1, z: -5 },
    rotation: { x: 0.4, y: -0.4, z: 0.2 }
  },
  // Transition to description - Goldie flies left across screen
  {
    scrollProgress: 0.50,
    position: { x: 2, y: 0, z: -6 },
    rotation: { x: 0.2, y: 0.2, z: 0.1 }
  },
  {
    scrollProgress: 0.58,
    position: { x: -4, y: -2, z: -4 },
    rotation: { x: 0.1, y: 0.7, z: 0.3 }
  },
  // Description section - Goldie dances around the text
  {
    scrollProgress: 0.65,
    position: { x: -10, y: -1, z: -5 },
    rotation: { x: 0.3, y: 0.9, z: 0.2 }
  },
  {
    scrollProgress: 0.72,
    position: { x: -12, y: 1, z: -3 },
    rotation: { x: -0.2, y: 0.5, z: 0.4 }
  },
  {
    scrollProgress: 0.78,
    position: { x: -8, y: -2, z: -6 },
    rotation: { x: 0.2, y: 0.3, z: 0.1 }
  },
  // Transition to contact - Goldie flies toward bottom right
  {
    scrollProgress: 0.85,
    position: { x: 0, y: -3, z: -4 },
    rotation: { x: 0.3, y: -0.2, z: 0.2 }
  },
  {
    scrollProgress: 0.92,
    position: { x: 8, y: -2, z: -3 },
    rotation: { x: 0.1, y: -0.5, z: 0.3 }
  },
  // Contact section - Final position
  {
    scrollProgress: 1.0,
    position: { x: 10, y: -1, z: -2 },
    rotation: { x: 0.2, y: -0.6, z: 0.1 }
  }
];

// ============================================
// SMOOTH FLIGHT ANIMATION - Interpolates between waypoints
// ============================================
const smoothFlight = () => {
  if (!entranceComplete || !bee) return;
  
  // Calculate scroll progress (0 to 1)
  const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
  const scrollHeight = document.documentElement.scrollHeight - window.innerHeight;
  const scrollProgress = Math.min(Math.max(scrollTop / scrollHeight, 0), 1);
  
  // Find the two waypoints to interpolate between
  let startWaypoint = flightPath[0];
  let endWaypoint = flightPath[1];
  
  for (let i = 0; i < flightPath.length - 1; i++) {
    if (scrollProgress >= flightPath[i].scrollProgress && 
        scrollProgress <= flightPath[i + 1].scrollProgress) {
      startWaypoint = flightPath[i];
      endWaypoint = flightPath[i + 1];
      break;
    }
  }
  
  // Calculate interpolation factor between the two waypoints
  const segmentProgress = (scrollProgress - startWaypoint.scrollProgress) / 
                         (endWaypoint.scrollProgress - startWaypoint.scrollProgress);
  
  // EDIT: Change 'power2.out' to adjust interpolation smoothness
  // Options: 'linear', 'power2.inOut', 'elastic.out', 'back.out'
  const easedProgress = gsap.parseEase("power2.out")(segmentProgress);
  
  // Interpolate position
  const newPosition = {
    x: startWaypoint.position.x + (endWaypoint.position.x - startWaypoint.position.x) * easedProgress,
    y: startWaypoint.position.y + (endWaypoint.position.y - startWaypoint.position.y) * easedProgress,
    z: startWaypoint.position.z + (endWaypoint.position.z - startWaypoint.position.z) * easedProgress
  };
  
  // Interpolate rotation
  const newRotation = {
    x: startWaypoint.rotation.x + (endWaypoint.rotation.x - startWaypoint.rotation.x) * easedProgress,
    y: startWaypoint.rotation.y + (endWaypoint.rotation.y - startWaypoint.rotation.y) * easedProgress,
    z: startWaypoint.rotation.z + (endWaypoint.rotation.z - startWaypoint.rotation.z) * easedProgress
  };
  
  // Apply smooth position updates directly (no GSAP animation for scroll-based movement)
  bee.position.x = newPosition.x;
  bee.position.y = newPosition.y;
  bee.position.z = newPosition.z;
  
  bee.rotation.x = newRotation.x;
  bee.rotation.y = newRotation.y;
  bee.rotation.z = newRotation.z;
  
  // OPTIONAL: Add subtle floating animation for more natural flight
  // EDIT: Adjust amplitude and frequency for different floating effects
  const floatAmplitude = 0.3; // EDIT: How much Goldie bobs up and down
  const floatSpeed = 2; // EDIT: How fast the floating motion is
  bee.position.y += Math.sin(Date.now() * 0.001 * floatSpeed) * floatAmplitude;
};

// ============================================
// RENDER LOOP - Continuously updates the scene
// ============================================
const reRender3D = () => {
  requestAnimationFrame(reRender3D);
  renderer.render(scene, camera);
  if (mixer) mixer.update(0.02);
  smoothFlight(); // Update position every frame for smooth floating
};
reRender3D();

// ============================================
// EVENT LISTENERS - Responds to user actions
// ============================================
window.addEventListener("scroll", smoothFlight);

window.addEventListener("resize", () => {
  renderer.setSize(window.innerWidth, window.innerHeight);
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
});
</script>

</body>
</html>
